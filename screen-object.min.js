var _SCREENOBJDATAS_=[],_screenOpenedBefore={_screenName:"",_screenIndex:0};async function _validateScreenTab(e=0,n="",a=""){var t={},r={};_SCREENOBJDATAS_.map(((a,s)=>{a.screenName==n&&null!=a?.screenData[e]&&(t=a?.screenData[e]),a.screenName==_screenOpenedBefore._screenName&&null!=a?.screenData[_screenOpenedBefore._screenIndex]&&(r=a?.screenData[_screenOpenedBefore._screenIndex])}));var s=[],i=!0;if(t.columns!=r.columns){const e=r?.screenValidation,n=r?.components;if(null!=e&&(null!=e?.inputValidation&&e?.inputValidation.map(((e,n)=>{const a=e?.rules.split("|"),t=$(`input[name=${e?.inputName}]`).val();a.map(((n,a)=>{"required"==n?.toLowerCase()&&""==t&&s.push({name:e.inputName,errorMessage:"Field is required"});const r=parseInt(n?.substring(11));"min-length"==n?.toLowerCase().substring(0,10)&&t?.toString().length<r&&s.push({name:e.inputName,errorMessage:"Min length is "+r});const i=parseInt(n?.substring(11));"max-length"==n?.toLowerCase().substring(0,10)&&t?.toString().length<i&&s.push({name:e.inputName,errorMessage:"Max length is "+i})}))})),null!=e?.serverValidation&&""!=e?.serverValidation&&s.length<=0)){let a={};n.map(((e,n)=>{a[e?.inputName]=$(`input[name=${e.inputName}]`).val()}));try{await $.ajax({url:e?.serverValidation,type:"POST",data:a,async:!0,success:function(n){n=$.parseJSON(n),_printMsgs="",null!=n[e?.errorResponse]&&n[e?.errorResponse].map(((e,n)=>{_printMsgs+=`${e}<br />`})),""!=_printMsgs&&(setMessage("Something went wrong","warning",_printMsgs),i=!1)},error:function(e,n){}})}catch(e){}}}$.each($("ul.nav-tabs > li.nav-item"),(function(e,n){if($(this).hasClass("active")){const e=$(this).children(),n=e.attr("href");s.length<=0&&i&&($(this).removeClass("active"),$(e).removeClass("active"),$(n).removeClass("active"),$("#_kampretTabList_"+a).addClass("active"),$("#_kampretTabList_"+a).children().addClass("active"),$("#_kampretTab_"+a).addClass("active"))}})),s.length<=0&&i&&(_screenOpenedBefore={_screenIndex:e,_screenName:n}),$("._kampretScreenErrorMessage").remove(),s.map(((e,n)=>$(`#_inpt_${e?.name}`).parent(".input-group, .form-group").after('<p class="_kampretScreenErrorMessage text-danger">'+e?.errorMessage+"</p>")))}!function(e){e.fn.screenKampret=function(n){const a=e.extend({formAction:null,type:"tabs",screens:[]},n);if(a.screens.length>0){let e=`kampretScreen-${Math.ceil(100*Math.random())}`;_SCREENOBJDATAS_.push({screenName:e,screenData:a.screens}),_screenOpenedBefore._screenName=e;var t='<form action="'+a.formAction+'" method="POST">';"next"==a.type||(t+=function(e=[],n=""){var a='<div role="tabpanel">';return a+='<ul class="nav nav-tabs nav-tabs-line" id="lineTab" role="tablist">',$.each(e,(function(e,t){let r=t?.title?.toLowerCase();r=r.replace(/ /g,"");let s="";null!=t?.screenValidation?.serverValidation&&t?.screenValidation?.serverValidation,null!=t?.screenValidation?.errorResponse&&t?.screenValidation?.errorResponse,null!=t?.screenValidation?.inputValidation&&t.screenValidation.inputValidation.map(((e,n)=>{s+=`${e.inputName}_VALIDATIONS_${e.rules}_SPACE_`})),a+='<li role="presentation" id="_kampretTabList_'+r+'" class="nav-item '+(0==e?"active":"")+'" onclick="_validateScreenTab(\''+e+"','"+n+"','"+r+"')\">",a+='<a href="#_kampretTab_'+r+'" class="nav-link '+(0==e?"active":"")+'" role="tab" aria-controls="'+r+'">'+t?.title?.toUpperCase()+"</a>",a+="</li>"})),a+="</ul>",a+='<div class="tab-content">',$.each(e,(function(e,n){let t=n?.title?.toLowerCase();t=t.replace(/ /g,""),a+='<div style="padding:10px" class="tab-pane '+(0==e?"active":"")+'" id="_kampretTab_'+t+'" role="tabpanel">';const r=Math.floor(100*Math.random()+1);a+=_generateKampretForm({formName:r,columns:n?.columns,components:n?.components,buttons:n?.buttons}),a+="</div>"})),a+="</div>"}(a.screens,e)),t+="</form>",$(this).html(t);_generateKampretForm(a)}}}(jQuery);