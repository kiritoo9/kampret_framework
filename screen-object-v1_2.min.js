let _MAINFORM_="";const _RNDNUMBER_=765434567991273;let _SCREEN_MAIN_DATA_=[];function _btnObjectAction(t="",e=""){if("openform"==t.toLowerCase())$("._formObjectStyle").hide(),$(`#${e}`).show();else if("submit"==t.toLowerCase()){$("._kampretScreenErrorMessage").remove();var n={};let t=!0;$("[id^='_inpt_']").map(((e,o)=>{const l=$(o);if(n[l.attr("name")]=l.val(),null!=l.data("rules")){const e=l.data("rules").split("|");if(null!=e&&e.length>0){let n=[];e.map(((t,e)=>{if("required"==t?.toLowerCase())""!=l.val()&&l.val()||n.push("Field is required!");else if(["max-length","min-length"].includes(t?.substring(0,10)?.toLowerCase())){const e=t?.substring(11);"max"==t?.substring(0,3)?.toLowerCase()&&l.val().length>e&&n.push(`Max length is ${e} char(s)`),"min"==t?.substring(0,3)?.toLowerCase()&&l.val().length<e&&n.push(`Min length is ${e} char(s)`)}})),n.map(((t,e)=>$(l).parent(".input-group, .form-group").after(`\n\t        \t\t\t<p class="_kampretScreenErrorMessage text-danger">${t}</p>`))),n.length>0&&(t=!1)}}})),t&&Swal.fire({title:"Are you sure?",text:"The form data might be lost after this action",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"No, Wait!",confirmButtonText:"Yes"}).then((t=>{t.isConfirmed&&($(`#${_MAINFORM_}`).submit(),$("input,select,textarea,button").attr("disabled",!0))}))}}function _addRowTableObject(t="",e="",n=""){let o=[];_SCREEN_MAIN_DATA_.map(((n,l)=>{n?.name?.toLowerCase()==e.toLowerCase()&&n?.children?.map(((e,n)=>{e?.name?.toLowerCase()==t.toLowerCase()&&(o=e?.tblColumns)}))}));var l="";if(null!=o&&o?.length>0){const t=`${name}-${Math.ceil(Math.random()*_RNDNUMBER_)}`;l+=`<tr id="${t}">`,o.map(((t,n)=>{const o=t?.readonly?"readonly":"";l+="<td>",l+=`\n\t\t\t\t\t\t<Component \n\t\t\t\t\t\t\tdata-rules="${t?.rules||""}"\n\t\t\t\t\t\t\tdata-element="${t?.componentId}" \n\t\t\t\t\t\t\tname="${e}[${t?.name}][]"\n\t\t\t\t\t\t\tdefaultValue=""\n\t\t\t\t\t\t\t${o}\n\t\t\t\t\t\t></Component>\n\t\t\t\t\t`,l+="</td>"})),l+='<td style="width:5%">',l+=`<button type="button" onclick="_removeRowTableObject('${t}')" class="btn btn-sm btn-danger"><i class="fa fa-trash"></i></button>`,l+="</td>",l+="</tr>"}$(`#_tblObjctAppend${n}`).append(l),generateKampretComponent()}function _removeRowTableObject(t=""){$(`#${t}`).remove()}!function(t){t.fn.screenObject=function(e){const n=t.extend({screenName:"",submitAction:"",forms:[],buttons:[],activeForm:""},e);if(n.forms.length>0){const t=Math.ceil(Math.random()*_RNDNUMBER_),e=`${n.screenName}-${t}`;_MAINFORM_=e,_SCREEN_MAIN_DATA_=n.forms;var o=`<form method="POST" action="${n.submitAction}" id="${e}">`;o+='<div class="_screenObjectStyle">',n.forms.map(((t,e)=>{o+=`<div id="${t?.name||"myForm"}" class="_formObjectStyle" style="display:${n.activeForm==t?.name?"block":"none"}">`,n.buttons.map(((e,l)=>{if(e?.group?.includes(t?.name)){const t="openform"!=e?.action?.toLowerCase()?"submit":"openform";o+=`\n\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\ttype="button" \n\t\t\t\t\t\t\t\t\tid="${e?.name}-${Math.ceil(Math.random()*_RNDNUMBER_)}" \n\t\t\t\t\t\t\t\t\tclass="_btnObjectStyle ${e?.class||"btn btn-default"}"\n\t\t\t\t\t\t\t\t\tonclick="_btnObjectAction('${t}', '${"openform"==t?e?.to:n.submitAction}')"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${e?.label||"My Button"}\n\t\t\t\t\t\t\t\t</button>`}})),null!=t?.children&&t.children.map(((e,n)=>{o+=`<legend class="_legendStyle">${e?.title||"Form Title"}</legend>`,"formcell"==e?.celltype?.toLowerCase()?o+=function(t={}){var e='<div class="row">';let n=1;null!=t?.columns&&t?.columns>0&&t?.columns<=6&&(n=t?.columns);const o=n>0?Math.ceil(12/n):12;if(null!=t?.formcell)for(let l=1;l<=n;++l)e+=`<div class="col-sm-${o}">`,t.formcell.map(((t,n)=>{if(t?.column==l){const n=null!=t?.defaultValue?t?.defaultValue:"",o=null!=t?.label?t?.label:t?.name,l=t?.readonly?"readonly":"";let a="",r="";null!=t?.options&&t.options.map(((t,e)=>{a+=`${t?.label}_OPTSPACE_`,r+=`${t?.value}_OPTSPACE_`})),null!=t?.componentId&&(e+=`\n\t\t\t\t\t\t\t\t<Component \n\t\t\t\t\t\t\t\t\tdata-rules="${t?.rules||""}"\n\t\t\t\t\t\t\t\t\tlabel="${o}" \n\t\t\t\t\t\t\t\t\tdata-element="${t?.componentId}" \n\t\t\t\t\t\t\t\t\tname="${t?.name}" \n\t\t\t\t\t\t\t\t\tdefaultValue="${n}"\n\t\t\t\t\t\t\t\t\t${l}\n\t\t\t\t\t\t\t\t\tdata-labeloptions="${a}"\n\t\t\t\t\t\t\t\t\tdata-valueoptions="${r}"\n\t\t\t\t\t\t\t\t></Component>\n\t\t\t\t\t\t\t`)}})),e+="</div>";return e+="</div>"}(e):"table"==e?.celltype?.toLowerCase()&&(o+=function(t={},e=""){const n=`${t?.name}-${Math.ceil(Math.random()*_RNDNUMBER_)}`;var o='<table class="_tableObjectStyle table table-bordered">';return o+="<thead>",o+="<tr>",null!=t?.tblColumns&&(t?.tblColumns.map(((t,e)=>o+=`<th>${t?.header||"Column"+e}</th>`)),o+="<th>Actions</th>"),o+="</tr>",o+="</thead>",o+=`<tbody id="_tblObjctAppend${n}"></tbody>`,o+="<tfooter>",o+=`<tr><td colspan="${t?.tblColumns?.length+1}">`,o+=`<button type="button" onclick="_addRowTableObject('${t?.name}','${e}','${n}')" class="_btnTableObjectStyle btn btn-sm btn-primary btn-rounded"><i class="fa fa-plus"></i></button>`,o+="</td></tr>",o+="</tfooter>",o+="</table>"}(e,t?.name))})),o+="</div>"})),o+="</div>",o+="</form>",$(this).html(o),$(`#${_MAINFORM_}`).on("keydown",(function(t){if(13==t.keyCode)return t.preventDefault(),!1}))}}}(jQuery);